<!-- ============================================================== -->
<!-- toggle and nav items -->
<!-- ============================================================== -->
<ul class="navbar-nav float-left mr-auto">
    <li class="nav-item d-none d-md-block">
        <a (click)="toggleSidebar.emit()" class="nav-link sidebartoggler waves-effect waves-light" href="javascript:void(0)" data-sidebartype="mini-sidebar">
            <i class="sl-icon-menu font-20"></i>
        </a>
    </li>   
</ul>
<!-- ============================================================== -->
<!-- Right side toggle and nav items -->
<!-- ============================================================== -->
<ul class="navbar-nav float-right">    

    <!-- ============================================================== -->
    <!-- Temi -->
    <!-- ============================================================== -->
    <li class="nav-item" ngbDropdown>
        <a ngbDropdownToggle class="nav-link text-muted" href="javascript:void(0)" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            <span>Aspetto</span>
        </a>
        <div class="dropdown-menu animated bounceInDown" ngbDropdownMenu>   
            <a class="dropdown-item" href="javascript:void(0)" (click)="themeNormal()">
                Sfondo chiaro
                <!-- <i class="fa fa-angle-right"></i> -->
            </a>
            <a class="dropdown-item" href="javascript:void(0)" (click)="themeDark()">
                Sfondo scuro
                <!-- <i class="fa fa-angle-right"></i> -->
            </a>
        </div>
    </li>
    <!-- ============================================================== -->
    <!-- Search -->
    <!-- ============================================================== -->
    <!-- <li class="nav-item search-box">
        <a (click)="showSearch = !showSearch" class="nav-link waves-effect waves-dark" href="javascript:void(0)">
            <i class="ti-search"></i>
        </a>
        <form class="app-search position-absolute" [ngClass]="{'show-search': showSearch}">
            <input type="text" class="form-control" placeholder="Search &amp; enter">
            <a class="srh-btn" (click)="showSearch = !showSearch">
                <i class="ti-close font-16"></i>
            </a>
        </form>
    </li> -->


    <!-- ============================================================== -->
    <!-- User profile and search -->
    <!-- ============================================================== -->
    <li  *ngIf="!(isLoggedIn$ | async) as isLoggedIn; else logout"  class="nav-item" ngbDropdown placement="bottom-right" >
        <a ngbDropdownToggle class="nav-link text-muted waves-effect waves-dark pro-pic" href="{{baseurl + 'api/loginSaml'}}" data-toggle="dropdown" aria-haspopup="true"
            aria-expanded="false" data-sidebartype="mini-sidebar">
        <!--<a class="nav-link sidebartoggler waves-effect waves-light" href="{{baseurl + 'api/loginSaml'}}" data-sidebartype="mini-sidebar">-->
            <span>Login</span>
        </a>
    </li>   
     <ng-template #logout> 
    <li class="nav-item" ngbDropdown placement="bottom-right">
        <a ngbDropdownToggle class="nav-link text-muted waves-effect waves-dark pro-pic" href="javascript:void(0)" data-toggle="dropdown" aria-haspopup="true"
            aria-expanded="false"  data-sidebartype="mini-sidebar">
            <div class="d-flex justify-content-center" style="width: 200px;">{{ username }}</div>
            <!-- <img src="assets/images/users/1.jpg" alt="user" class="rounded-circle" width="31"> -->
        </a>
        <div class="dropdown-menu-right user-dd animated flipInY" ngbDropdownMenu>
            <span class="with-arrow">
                <span class="bg-primary"></span>
            </span>
            <div class="d-flex no-block align-items-center p-15 bg-primary text-white m-b-10">
                <!--<div class="">
                     <img src="assets/images/users/1.jpg" alt="user" class="img-circle" width="60"> 
                </div> -->
                <div class="m-l-10">
                    <h4 class="m-b-0">{{ username }}</h4>
                    <p class=" m-b-0">{{ email }}</p>
                </div>
            </div>
            <!-- <a class="dropdown-item" href="javascript:void(0)">
                <i class="ti-user m-r-5 m-l-5"></i> My Profile</a>
            <a class="dropdown-item" href="javascript:void(0)">
                <i class="ti-wallet m-r-5 m-l-5"></i> My Balance</a> -->
             
            <!-- <a class="dropdown-item" href="{{ documentationUrl }}" target="_blank">
                <i class="ti-info m-r-5 m-l-5"></i> Documentazione</a>
            <div class="dropdown-divider"></div>
            <a class="dropdown-item" href="https://bitbucket.org/enoliva/uniconvclient/issues/new" target="_blank">
                <i class="ti-email m-r-5 m-l-5"></i> Apri segnalazione</a>
            <div class="dropdown-divider"></div>  -->
            <a class="dropdown-item" href="javascript:void(0)"  (click)="onLogout()">
                <i class="fa fa-power-off m-r-5 m-l-5"></i> Logout</a>
            <div class="dropdown-divider"></div>
            <ng-container *ngIf="true || !isProd()">                
                <a class="dropdown-item"  *ngxPermissionsOnly="['SUPER-ADMIN']" href="javascript:void(0)" (click)="onUserChange()">                
                    Impersona utente
                </a>
            </ng-container>
            <!-- <div class="p-l-30 p-10">
                <a href="javascript:void(0)" class="btn btn-sm btn-success btn-rounded">View Profile</a>
            </div> -->
        </div>
    </li>
   </ng-template> 
    <!-- ============================================================== -->
    <!-- User profile and search -->
    <!-- ============================================================== -->
</ul>